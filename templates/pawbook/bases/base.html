<!DOCTYPE html>
{% load staticfiles %}
<html>
	<head>
		<title>
		Pawbook - 
		{% block title_block %}
			Welcome!
		{% endblock %}
		</title>
		<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,700|Roboto:300,400,500,700&display=swap" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <link rel="stylesheet" href="{% static 'css/base.css' %}" />
		{% block css_block %}
		{% endblock %}
	</head>
	
	<body>
        <header>
            <navbar>
                <a href="/pawbook/" class="highlight-box">
                    <h1>pawbook</h1>
                </a>
                <a href="/pawbook/marketplace/">MARKETPLACE</a>
                <a href="/pawbook/posts/">POSTS</a>
                <a href="/pawbook/pet-o-pedia/">PET-O-PEDIA</a>

                {% if user.is_authenticated %}
                	<a href="{% url 'pawbook:show_profile' user.username %}"><img src="dog smiling.jpg" alt="User's Profile Picture" class="profile_image">{{ user.username }}</a>
                	<a href="{% url 'pawbook:logout' %}">Logout</a>

                {% else %}
                	<a href="/pawbook/login/">LOGIN</a>
                	<a href="/pawbook/register/">REGISTER</a>
                {% endif %}
                <form method = "GET" action = ''>
                    <input type = 'text' name = 'query' placeholder = 'SEARCH'/>
                </form>
            </navbar>
        </header>

        <main class="wrapper col-3">
            <div class="sidebar-l">
                <h3>PET INFO</h3>
                <p>A list of quick links to find out keeping information for the following pets:</p>
                <ul>
                    {% if allPosts %}
                        {% for post in allPosts %}
                            <li><a href='{% url "pawbook:show_petPedia" post.slug %}'>{{ post.breed }}</a></li>
                        {% endfor %}
                    {% endif %}
                </ul>
            </div>
            
            <div class="main-area">
                {% block body_block %}
                {% endblock %}
            </div>

            <div class="market_column sidebar-r">
                <h3>MARKET SEARCH</h3>
                <form method = 'GET' action = "">
                    <!--<input type="number" name="quantity" min="1" max="10000">-->
                    <!--<input type="number" name="quantity" min="1" max="10000">-->
                    <!--<input type="text" placeholder="SEARCH">-->
                    <input type = 'text' name = "query" placeholder = 'Search posts' />
                    <input type = 'submit' value = 'Search' />
                </form>
                <div class = "pagination">
                    <span class = "step-links">
                        {% if object_list.has_previous %}
                            <a href="?page={{object_list.previous_page_number}}{% if request.GET.query %}
                                 &query ={{request.GET.query}}{% endif %}">previous</a>
                        {% endif %}
                        <span class = "current">
                            Page {{object_list.number }} of {{object_list.paginator.num_pages}},
                        </span>
                        {% if object_list.has_next %}
                            <a href="?page={{ object_list.next_page_number }} {% if request.GET.query %}
                                &query ={{request.GET.query}}{% endif %}">next</a>
                        {% endif %}
                    </span>
                </div>
            </div>
        </main>

        <footer>
            <a href="/pawbook/contact/">CONTACT</a>
            <a href="/pawbook/faq/">FAQ</a>
            <a href="/pawbook/about/">ABOUT</a>
        </footer>

        <script>
            var prevScrollpos = window.pageYOffset;
            var $header = $("header");
            window.onscroll = function() {
                var currentScrollPos = window.pageYOffset;
                if (prevScrollpos > currentScrollPos || currentScrollPos < 50) {
                    $header.css("top", "0");
                } else {
                    $header.css("top", "-70px");
                }
                prevScrollpos = currentScrollPos;
            }
        </script>
	</body>
</html>
